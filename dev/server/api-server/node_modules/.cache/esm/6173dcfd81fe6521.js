let express,Server,APP_PORT,DB_URL,mongoose,exp,errorHandler;_81f‍.w("express",[["default",["express"],function(v){express=v}]]);_81f‍.w("http",[["Server",["Server"],function(v){Server=v}]]);_81f‍.w("./config",[["APP_PORT",["APP_PORT"],function(v){APP_PORT=v}],["DB_URL",["DB_URL"],function(v){DB_URL=v}]]);_81f‍.w("mongoose",[["default",["mongoose"],function(v){mongoose=v}]]);_81f‍.w("constants",[["default",["exp"],function(v){exp=v}]]);_81f‍.w("./middlewares/errorHandler",[["default",["errorHandler"],function(v){errorHandler=v}]]);




const mainRouter = require('./router')


const app = express()


app.listen(APP_PORT, () => {
    console.log(`server started at ${APP_PORT}`)
})

async function dbConnection() {
    try {
        await mongoose.connect(DB_URL, () => {
            console.log("DB Connected !")
        })
    } catch (err) {
        throw err
    }
}
dbConnection()

app.use(express.json())
app.use('/api', mainRouter)




app.use(errorHandler)