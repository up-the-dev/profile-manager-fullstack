let DEBUG_MODE,ValidationError,CustomErrorHandler;_f4c‍.x([["default",()=>_f4c‍.o]]);_f4c‍.w("../config",[["DEBUG_MODE",["DEBUG_MODE"],function(v){DEBUG_MODE=v}]]);_f4c‍.w("joi",[["ValidationError",["ValidationError"],function(v){ValidationError=v}]]);_f4c‍.w("../services",[["CustomErrorHandler",["CustomErrorHandler"],function(v){CustomErrorHandler=v}]]);


const errorHandler = (err, req, res, next) => {
    let statusCode = 500
    let data = {
        msg: "Internal Server Error",
        ...(DEBUG_MODE === "true" && { original_Error: err.message })

    }
    if (err instanceof ValidationError) {

        statusCode = 422
        data = {
            msg: err.message
        }

    }
    if (err instanceof CustomErrorHandler) {

        statusCode = err.status

        data = {
            msg: err.msg
        }

    }
    res.status(statusCode).json(data)
}
_f4c‍.d(errorHandler);